# 基础接口使用说明

## 创世块通用参数

接口返回参数中部分包含有创世块相关的参数信息，下表列出了创世块相关的参数及其说明。

| **创世块参数**                                                          |                                                  |                                          |
| ----------------------------------------------------------------------- | ------------------------------------------------ | ---------------------------------------- |
| **参数名**                                                              | **类型**                                         | **参数说明**                             |
| genesisAsset                                                            |                                                  | 创世块附加信息，JSON 对象                |
| genesisAsset.chainName                                                  | string                                           | 链名                                     |
| genesisAsset.assetType                                                  | string                                           | 链主权益名                               |
| genesisAsset.magic                                                      | string                                           | 链网络标识符                             |
| genesisAsset.bnid                                                       | 'b'\|'c'                                         | 链网络类型                               |
| genesisAsset.beginEpochTime                                             | number                                           | 链创世时间                               |
| genesisAsset.genesisLocationName                                        | string                                           | 链创世域名                               |
| genesisAsset.genesisAmount                                              | number                                           | 链创世账户初始持有的主权益量             |
| genesisAsset.minTransactionFeePerByte                                   | [Fraction](./types#Fraction)                     | 链事件每字节需要支付的最小手续费（分数） |
| genesisAsset.maxTransactionSize                                         | number                                           | 链上事件体最大字节数                     |
| genesisAsset.maxBlockSize                                               | number                                           | 链上区块体最大字节数                     |
| genesisAsset.maxTPSPerBlock                                             | number                                           | 链上区块体最大处理的事件 tps             |
| genesisAsset.consessusBeforeSyncBlockDiff                               | number                                           | 删除分叉时至少需要落后的高度             |
| genesisAsset.maxDelegateTxsPerRound                                     | number                                           | 每轮能处理的注册受托人数量               |
| genesisAsset.maxGrabTimesOfGiftAsset                                    | number                                           | 权益赠送事件最大可抢次数                 |
| genesisAsset.issueAssetMinChainAsset                                    | number                                           | 发行数组资产的账户最小持有的链资产数量   |
| genesisAsset.registerChainMinChainAsset                                 | number                                           | 注册创世块的账户最小持有的链资产数量     |
| genesisAsset.maxApplyAndConfirmedBlockHeightDiff                        | number                                           | 最大的过期区块间隔数量                   |
| genesisAsset.blockPerRound                                              | number                                           | 每轮的区块数量                           |
| genesisAsset.delegates                                                  | number                                           | 创世受托人数量                           |
| genesisAsset.whetherToAllowDelegateContinusElections                    | number                                           | 是否允许受托人连续参与竞选               |
| genesisAsset.forgeInterval                                              | number                                           | 区块间隔                                 |
| genesisAsset.rewardPercent                                              | object                                           | 奖励分配比例，JSON 对象                  |
| genesisAsset.rewardPercent.votePercent                                  | [Fraction](./types#Fraction)                     | 投票占区块总奖励的百分比                 |
| genesisAsset.rewardPercent.forgePercent                                 | [Fraction](./types#Fraction)                     | 打块占区块总奖励的百分比                 |
| genesisAsset.ports                                                      | object                                           | 区块链端口号，JSON 对象                  |
| genesisAsset.ports.port                                                 | number                                           | 共识端口号                               |
| genesisAsset.ports.scan_peer_port                                       | number                                           | 节点扫描端口号                           |
| genesisAsset.rewardPerBlock                                             | object                                           | 区块奖励，JSON 对象                      |
| genesisAsset.rewardPerBlock.heights                                     | number[]                                         | 奖励变动的区块里程                       |
| genesisAsset.rewardPerBlock.rewards                                     | string[]                                         | 每个区块里程对应奖励的资产数量           |
| genesisAsset.accountParticipationWeightRatio                            | object                                           | 账户参与度权重比，JSON 对象              |
| genesisAsset.accountParticipationWeightRatio.balanceWeight              | number                                           | 账户上一轮末持有的主权益量的权重         |
| genesisAsset.accountParticipationWeightRatio.numberOfTransactionsWeight | number                                           | 账户上一轮事件量持有的                   |
| genesisAsset.blockParticipationWeightRatio                              | object                                           | 区块参与度权重比                         |
| genesisAsset.blockParticipationWeightRatio.balanceWeight                | number                                           | 账户上一轮末持有的主权益量的权重         |
| genesisAsset.blockParticipationWeightRatio.numberOfTransactionsWeight   | number                                           | 账户上一轮事件量持有的                   |
| genesisAsset.averageComputingPower                                      | number                                           | 构建 tpow 的难度系数                     |
| genesisAsset.tpowOfWorkExemptionBlocks                                  | number                                           | tpow 豁免的区块高度                      |
| genesisAsset.transactionPowOfWorkConfig                                 | 不为空                                           | tpow 配置，JSON 对象                     |
| genesisAsset.transactionPowOfWorkConfig.growthFactor                    | [Fraction](./types#Fraction)                     | 链的 pow 难度增长系数                    |
| genesisAsset.transactionPowOfWorkConfig.participationRatio              | [Fraction](./types#Fraction)                     | 链的 pow 计算参与比率                    |
| genesisAsset.newDelegates                                               | string[]                                         | 新注册的受托人                           |
| genesisAsset.maxBeginBalance                                            | number                                           | 投票账户上轮末最大主权益量               |
| genesisAsset.maxTxCount                                                 | number                                           | 上一轮投票账户中最大的事件量             |
| genesisAsset.nextRoundDelegates                                         | [NextRoundDelegate](./types#NextRoundDelegate)[] | 下一轮的打块账户列表                     |

## 轮末块通用参数

接口返回参数中部分包含有创世块相关的参数信息，下表列出了创世块相关的参数及其说明。

| **轮末块参数**                    |                                                  |                                                                |
| --------------------------------- | ------------------------------------------------ | -------------------------------------------------------------- |
| **参数名**                        | **类型**                                         | **参数说明**                                                   |
| roundLastAsset                    | object                                           | 轮末块附加信息，JSON 对象                                      |
| roundLastAsset.newDelegates       | string[]                                         | 新注册的受托人                                                 |
| roundLastAsset.maxBeginBalance    | number                                           | 上一轮投票账户中的最大轮末主权益量                             |
| roundLastAsset.maxTxCount         | number                                           | 上一轮投票账户中最大的事件量                                   |
| roundLastAsset.nextRoundDelegates | [NextRoundDelegate](./types#NextRoundDelegate)[] | 下一轮的打块账户列表                                           |
| roundLastAsset.hash               | string                                           | 链上链 hash                                                    |
| roundLastAsset.rate               | any                                              | 上一轮投票账户的最大轮末主权益量和上一轮投票账户的最大事件的比 |

## 获取本地节点当前最新区块

接口全称:getLastblock

简写:glb

- 注：接下来所有接口章节的接口参数表中，除特殊说明外，如果返回参数没有填写”不为空”，均默认表示返回值不为空，不另外说明。

| **传入参数**           |          |                                                                                                    |
| ---------------------- | -------- | -------------------------------------------------------------------------------------------------- |
| **参数名**             | **类型** | **参数说明**                                                                                       |
| 无                     |          |                                                                                                    |
| **返回参数**           |          |                                                                                                    |
| **参数名**             | **类型** | **参数说明**                                                                                       |
| signature              | string   | 区块签名                                                                                           |
| height                 | number   | 区块高度                                                                                           |
| timestamp              | number   | 区块时间戳                                                                                         |
| blockSize              | number   | 区块大小                                                                                           |
| generatorPublicKey     | string   | 锻造者公钥                                                                                         |
| generatorEquity        | number   | 锻造者上一轮的得票数                                                                               |
| numberOfTransactions   | number   | 区块事件数量                                                                                       |
| payloadHash            | string   | 区块的 payloadHash                                                                                 |
| payloadLength          | number   | payloadHash 的长度                                                                                 |
| previousBlockSignature | string   | 前块 id                                                                                            |
| totalAmount            | number   | 区块流动的各种权益总量，单位：本；1 BFT = 100000000 本                                             |
| totalFee               | number   | 区块流动的总手续费，单位：本；1 BFT = 100000000 本                                                 |
| reward                 | number   | 区块奖励，单位：本；1 BFT = 100000000 本                                                           |
| magic                  | string   | 区块的网络标识符                                                                                   |
| remark                 | string   | 区块备注信息                                                                                       |
| blockParticipation     | any      | 区块参与度，区块处理的事件数据按照特定的规则计算得到的一个值；作为选取在出现相同高度的区块时的凭证 |

## 获取指定区块

接口全称: getBlock

简写: gb

| **传入参数**     |                                                |                    |
| ---------------- | ---------------------------------------------- | ------------------ |
| **参数名**       | **类型**                                       | **参数说明**       |
| height?          | number                                         | 区块高度           |
| signature?       | string                                         | 区块签名           |
| **返回参数**     |                                                |                    |
| **参数名**       | **类型**                                       | **参数说明**       |
| blocks           | [GetBlockBlockDef](./types#GetBlockBlockDef)[] | 符合条件的区块数组 |
| count            | number                                         | 符合条件的事件     |
| cmdLimitPerQuery | number                                         | 符合条件的事件     |

## 获取指定事件

接口全称: getTransactions

简写: gt

| **传入参数**     |                                                        |                                                                                                    |
| ---------------- | ------------------------------------------------------ | -------------------------------------------------------------------------------------------------- |
| **参数名**       | **类型**                                               | **参数说明**                                                                                       |
| id?              | string                                                 | 事件 id                                                                                            |
| height?          | number                                                 | 事件所属区块高度                                                                                   |
| senderId?        | string                                                 | 事件发起方                                                                                         |
| recipientId?     | string                                                 | 事件接收方                                                                                         |
| type?            | string[]                                               | 事件类型，查询多个类型用下划线隔开，如果不传入则不筛选事件类型，事件类型请参考[事件类](#_交易类型) |
| **返回参数**     |                                                        |                                                                                                    |
| **参数名**       | **类型**                                               | **参数说明**                                                                                       |
| trs              | [GetTransactionTrsDef](./types#GetTransactionTrsDef)[] | 符合条件的事件数组                                                                                 |
| count            | number                                                 | 符合条件的事件数量                                                                                 |
| cmdLimitPerQuery | number                                                 | 符合条件的事件数量                                                                                 |

## 获取指定账户

接口全称: getAccountInfoAndAssets

简写: ga

| **传入参数**           |          |                                                                                                  |
| ---------------------- | -------- | ------------------------------------------------------------------------------------------------ |
| **参数名**             | **类型** | **参数说明**                                                                                     |
| address                | 必填     | 账户地址                                                                                         |
| **返回参数**           |          |                                                                                                  |
| **参数名**             | **类型** | **参数说明**                                                                                     |
| accountInfo            |          | 账户基础信息，JSON 对象                                                                          |
| - address              |          | 账户地址                                                                                         |
| - publicKey            |          | 账户公钥                                                                                         |
| - accountStatus        |          | 账户状态：0 为正常；1 为冻结状态                                                                 |
| - isDelegate           |          | 是否为受托人：false 为普通账户；true 为受托人                                                    |
| - isAcceptVote         |          | 是否接收投票：false 为不接收；true 为接收投票                                                    |
| - producedblocks       |          | 已锻造区块数                                                                                     |
| - missedblocks         |          | 掉块数量，被选为受托人并且到达锻造区块的时间却因为各种原因没有锻造出相应的区块的次数             |
| - numberOfTransactions |          | 区块事件数量                                                                                     |
| - voteInfo             |          | 获得的权益信息                                                                                   |
| - vote                 |          | 获得的权益数量                                                                                   |
| - round                |          | 获得的权益所属轮次                                                                               |
| - equityInfo           |          | 参与治理投票的权益信息                                                                           |
| - round                |          | 权益所属轮次                                                                                     |
| - equity               |          | 权益剩余值                                                                                       |
| \- fixedEquity         |          | 权益初始值                                                                                       |
| \- lastRoundInfo       |          | 上一轮的余额信息， 倒数第一轮的轮次信息，若当前为 600 ，则当前为第 11 轮，这个值指的则是第 10 轮 |
| \- round               |          | 轮次                                                                                             |
| \- assetNumber         |          | 轮末账户持有的主权益数量                                                                         |
| \- txCount             |          | 本轮账户的事件量                                                                                 |
| \- height              |          | 账户变动高度                                                                                     |
| accountAsset           |          | 账户权益信息，JSON 对象                                                                          |
| \- address             |          | 账户地址                                                                                         |
| - publicKey            |          | 账户公钥                                                                                         |
| - assets               |          | 权益信息详情 权益信息包括：权益所属链网络标识符，权益名称以及权益数量                            |
| - sourceChainMagic     |          | 权益所属链网络标识符                                                                             |
| - assetType            |          | 权益名                                                                                           |
| - assetNumber          |          | 权益数量                                                                                         |
| \- sourceChainName     |          | 权益所属主链名称                                                                                 |
| \- paidFee             |          | 累计花费手续费                                                                                   |
| - votingRewards        |          | 累计投票收益                                                                                     |
| - forgingRewards       |          | 累计打块收益                                                                                     |
| \- height              |          | 账户变动高度                                                                                     |

## 创建账户

接口全称: createAccount

简写: ca

| **传入参数** |          |              |
| ------------ | -------- | ------------ |
| **参数名**   | **类型** | **参数说明** |
| secret       | 必填     | 账户密钥     |
| **返回参数** |          |              |
| **参数名**   | **类型** | **参数说明** |
| address      |          | 账户地址     |
| publicKey    |          | 账户公钥     |
| secretKey    |          | 账户私钥     |

## 获取节点状态

接口全称: getBlockChainStatus

简写: gbc

| **传入参数**    |          |                                          |
| --------------- | -------- | ---------------------------------------- |
| **参数名**      | **类型** | **参数说明**                             |
| 无              |          |                                          |
| **返回参数**    |          |                                          |
| **参数名**      | **类型** | **参数说明**                             |
| status          |          | 节点状态，详情请参考\<[节](#_节点状态)\> |
| peers           |          | 已连接节点数                             |
| isReady         |          | 区块链数据是否初始化完成                 |
| serverTimestamp |          | 节点的当前区块链时间戳                   |
